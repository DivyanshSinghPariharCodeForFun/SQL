SET SERVEROUTPUT ON
DECLARE
    v_search_value   VARCHAR2(100) := 'A317010179';
    v_sql            VARCHAR2(1000);
    v_found          NUMBER;
BEGIN
    FOR col_rec IN (
        SELECT table_name, column_name
        FROM (
            SELECT DISTINCT table_name
            FROM all_tab_columns
            WHERE owner = USER
            ORDER BY table_name
        )
        WHERE ROWNUM <= 4
        AND table_name IN (
            SELECT table_name FROM all_tab_columns WHERE data_type IN ('VARCHAR2', 'CHAR', 'NUMBER')
        )
        AND column_name IN (
            SELECT column_name FROM all_tab_columns WHERE data_type IN ('VARCHAR2', 'CHAR', 'NUMBER')
        )
    )
    LOOP
        BEGIN
            v_sql := 'SELECT COUNT(*) FROM "' || col_rec.table_name || '" WHERE TO_CHAR("' || col_rec.column_name || '") LIKE :1';
            EXECUTE IMMEDIATE v_sql INTO v_found USING '%' || v_search_value || '%';
            
            IF v_found > 0 THEN
                DBMS_OUTPUT.PUT_LINE('Found in ' || col_rec.table_name || '.' || col_rec.column_name);
            END IF;
        EXCEPTION
            WHEN OTHERS THEN
                -- Skip columns that can't be searched or cast
                NULL;
        END;
    END LOOP;
END;
/
